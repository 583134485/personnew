<!DOCTYPE html>
<html>

<head>

    <meta charset="utf-8">
    <meta name="viewport"content="width=device-width,initial-scale=1.0, maximum-scale=1.0, user-scalable=no"><meta name="renderer" content="webkit">

    <title>百度ECHarts7</title>
    <meta name="keywords" content="">
    <meta name="description" content="">

    <link href="https://cdn.bootcss.com/bootstrap/3.3.6/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://cdn.staticfile.org/font-awesome/4.4.0/css/font-awesome.css?v=4.4.0" rel="stylesheet">


    <!--    <link href="css/bootstrap.min.css?v=3.4.0" rel="stylesheet">
        <link href="font-awesome/css/font-awesome.css?v=4.3.0" rel="stylesheet">-->

    <link href="css/animate.css" rel="stylesheet">
    <link href="css/style.css?v=2.2.0" rel="stylesheet">

    <!--person test css-->
    <link href="css/demo.css" rel="stylesheet">

</head>

<body>
<div id="wrapper">
    <!--侧边导航-->
    <nav class="navbar-default navbar-static-side" role="navigation">
        <!--折叠收缩-->
        <div class="sidebar-collapse">
            <!-- ul 无序列表-->
            <ul class="nav" id="side-menu">
                <li class="nav-header">

                    <div class="dropdown profile-element"> <span>
                            <img alt="image" class="img-circle img-responsive" src="img/dog.jpg" />
                             </span>
                        <a data-toggle="dropdown" class="dropdown-toggle" href="">
                                <span class="clear"> <span class="block m-t-xs"> <strong class="font-bold">User</strong>
                             </span> <span class="text-muted text-xs block">管理员 <b class="caret"></b></span> </span>
                        </a>
                        <ul class="dropdown-menu animated fadeInRight m-t-xs">
                            <li><a href="">修改头像</a>
                            </li>
                            <li><a href="">个人资料</a>
                            </li>
                            <li><a href="">联系我们</a>
                            </li>
                            <li><a href="">信箱</a>
                            </li>
                            <li class="divider"></li>
                            <li><a href="">安全退出</a>
                            </li>
                        </ul>
                    </div>
                    <div class="logo-element">
                        H+
                    </div>

                </li>
                <li class="">
                    <a href=""><i class="fa fa-th-large"></i> <span class="nav-label">主页</span> <span class="fa arrow"></span></a>
                    <ul class="nav nav-second-level">
                        <!--                            <li><a href="">主页示例一</a>
                                                  </li>
                                                <li><a href="">主页示例二</a>
                                                  </li>
                                                  <li><a href="">主页示例三</a>
                                                  </li>
                                                  <li><a href="">主页示例四</a>
                                                  </li>-->
                    </ul>
                </li>


                <li class="active">
                    <a href="index.html"><i class="fa fa-bar-chart-o"></i> <span class="nav-label">图表</span><span class="fa arrow"></span></a>
                    <ul class="nav nav-second-level">
                        <li><a href="echarts0.html">EChartsOne</a>
                        </li>
                        <li><a href="echarts.html">EChartsOne</a>
                        </li>
                        <li><a href="echarts5.html">EChartsTwo</a>
                        </li>
                        <li><a href="echarts7.html">EChartsTwo</a>
                        </li>

                    </ul>
                </li>

                <!--      <li>
                          <a href=""><i class="fa fa-edit"></i> <span class="nav-label">表单</span><span class="fa arrow"></span></a>
                          <ul class="nav nav-second-level">
                              <li><a href="">基本表单</a>
                              </li>
                              <li><a href="">表单验证</a>
                              </li>
                              <li><a href="">高级插件</a>
                              </li>
                              <li><a href="">步骤条</a>
                              </li>
                              <li><a href="">百度WebUploader</a>
                              </li>
                              <li><a href="">文件上传</a>
                              </li>
                              <li><a href="">富文本编辑器</a>
                              </li>
                              <li><a href="">simditor</a>
                              </li>
                              <li><a href="">头像裁剪上传</a>
                              </li>
                              <li><a href="">日期选择器layerDate</a>
                              </li>
                          </ul>
                      </li>-->

                <li class="">
                    <a href="#"><i class="fa fa-table"></i> <span class="nav-label">表格</span><span class="fa arrow"></span></a>
                    <ul class="nav nav-second-level">
                        <li><a href="datatables.html">datapicker</a>
                        </li>
                        <li><a href="bootstraptable.html">BootStrapTable</a>
                        </li>
                        <li><a href="table_jqgrid.html">jqGrid</a>
                        </li>
                    </ul>
                </li>
                <li>
                    <a href="#"><i class="fa fa-table"></i> <span class="nav-label">文件IO</span><span class="fa arrow"></span></a>
                    <ul class="nav nav-second-level">
                        <li><a href="uploadfile.html">文件上传</a>
                        </li>
                        <li><a href="filedown.html">数据导出</a>
                        </li>

                    </ul>
                </li>

            </ul>
        </div>
    </nav>

    <div id="page-wrapper" class="gray-bg dashbard-1 ">
        <div class="row border-bottom">
            <nav class="navbar navbar-static-top" role="navigation" style="margin-bottom: 0">
                <div class="navbar-header">
                    <a class="navbar-minimalize minimalize-styl-2 btn btn-primary " href="#"><i class="fa fa-bars"></i> </a>
                    <form role="search" class="navbar-form-custom" method="post" action="">
                        <div class="form-group">
                            <input type="text" placeholder="查找的内容 …" class="form-control" name="top-search" id="top-search">
                        </div>
                    </form>
                </div>
                <ul class="nav navbar-top-links navbar-right">
                    <li>
                        <span class="m-r-sm text-muted welcome-message"><a href="" title="返回首页"><i class="fa fa-home"></i></a></span>
                    </li>


                    <li>
                        <a href="login.html">
                            <i class="fa fa-sign-out"></i> 注册
                        </a>
                    </li>
                    <li>
                        <a href="login.html">
                            <i class="fa fa-sign-out"></i> 登陆
                        </a>
                    </li>
                    <li>
                        <a href="">
                            <i class="fa fa-sign-out"></i> 退出
                        </a>
                    </li>
                </ul>

            </nav>
        </div>
        <!-- <div class="row">-->
        <!--有无样式差明显-->
        <!-- <div class="col-lg-12">-->
        <div class="wrapper  wrapper-content animated fadeInRight red-padding">
       <!--正片-->
        <div class="row">
        <div class="col-lg-12">
        <div class="echarts"  id="newhot" style="height:600%;weight:200% "></div>


    <div class="col-lg-12">
        <!--<div><button id="btn" type="button">爆款</button></div>-->
        <!--<input type="text" name="name" value="单款案例打造2" id="name"/>-->
        <!--读取数据结果  ：<label id="label2"></label>-->
        <form name="myForm"  enctype="multipart/form-data">
            <input class="file" type="file" name="file" id="file">
            <input class="file" type="button" id="btn1" value="submit">
            上传 结果：<label id="label" ></label>
        </form>
        <!--<div>-->
            <!--商品信息：<label id="shop"></label>-->
        <!--</div>-->
        <!--<div><img  id="img" src=""  alt="图片不见了" ></div>-->
    </div>
    </div>
        </div>

        </div>
        <div class="footer">
            <div class="pull-right">
                By：<a href="" target="_blank"></a>
            </div>
            <div>
                <strong>Copyright</strong>
            </div>
        </div>
        <!--     </div>-->
        <!--</div>-->
    </div>


</div>

<!-- Mainly scripts -->
<!--<script src="js/jquery-2.1.1.min.js"></script>
<script src="js/bootstrap.min.js?v=3.4.0"></script>-->
<script src="https://apps.bdimg.com/libs/jquery/2.1.4/jquery.min.js"></script>

<script src="https://cdn.bootcss.com/bootstrap/3.3.6/js/bootstrap.min.js"></script>

<script src="js/plugins/metisMenu/jquery.metisMenu.js"></script>
<script src="js/plugins/slimscroll/jquery.slimscroll.min.js"></script>
<!--Chosen下拉选择框 -->
<script src="js/plugins/chosen/chosen.jquery.js"></script>

<!-- jQuery Validation plugin javascript-->
<script src="js/plugins/validate/jquery.validate.min.js"></script>
<!--中文消息-->
<script src="js/plugins/validate/messages_zh.min.js"></script>

<!-- ECharts  old -->
<!--<script src="js/plugins/echarts/echarts-all.js"></script>-->

<!-- ECharts  3.7.1-->
<script src="js/plugins/echarts/echarts3.7.1.js"></script>

<!-- Custom and plugin javascript -->
<script src="js/hplus.js?v=2.2.0"></script>
<!--<script src="js/plugins/pace/pace.min.js"></script>-->

<!-- ECharts demo data -->
<!--<script src="js/demo/echarts-demo.js"></script>-->


<script type="application/javascript">
    function show(){
        var option=myChart.getOption();
        $.ajax({
            type:"post",
            url:"http://localhost:8080/libraryone/HotGoods/shownewhotgoods",
            async:false,
            data:"name="+$("#name").val(),
            datatype:"json",
            //contentType:"application/json;charset=utf-8",
            success:function(result){
                //对象
                var result=eval("("+result+")");
                var kk=[];
                var datetime=[];
                var flow=[];
                var pay=[];
                var plus=[];
                var money=[];
                var conversion=[];
                var purchaseRate=[];
                var price=[];
                var picurl=[];
                //其实以下判断还是有些多余
                for (key in result){

                    /* 	if(result.key.)
                        {
                            //这是为了取真正展示的图表上的字段
                         kk.put(key);
                        }  */

                    if(key=="datatime"){
                        //alert(result.key);

                        datetime=result[key];
                    }
                    else if(key=="flow"){
                        flow=result[key];
                    }
                    else if(key=="payment"){
                        pay=result[key];
                    }

                    else if(key=="plus"){
                        plus=result[key];
                    }
                    else if(key=="money"){
                        money=result[key];
                    }

                    else if(key=="price"){
                        price=result[key];
                    }

                    else if(key=="purchaseRate"){
                        purchaseRate=result[key];
                    }
                    else if(key=="conversion"){
                        //alert(result(key));
                        conversion=result[key];
                    }
                    else if(key=="pictureUrl"){
                        picurl=result[key];
                    }
                }
                // option.legend.data=kk;
                option.xAxis[0].data=datetime;
                option.series[0].data=flow;
                option.series[1].data=pay;
                option.series[2].data=plus;
                option.series[3].data=price;
                option.series[4].data=money;
                option.series[5].data=purchaseRate;
                option.series[6].data=conversion;
                myChart.hideLoading();
                myChart.setOption(option);
                $("#shop").html("id:"+"&nbsp;&nbsp;&nbsp;"+result["id"]+"&nbsp;&nbsp;&nbsp;"+"款号:"+result["styleNumber"]+"<br/>"+"吊牌价:"+result["tagPrice"]+"&nbsp;&nbsp;&nbsp;"+"上新价:"+result["Newquotation"]+"<br/>"+"折扣:"+result["discount"]+"&nbsp;&nbsp;&nbsp;"+"品类:"+result["category"]+"<br/>"+"面料:"+result["fabric"]+"&nbsp;&nbsp;&nbsp;"+"版型:"+result["typeVersion"]+"<br/>"+"年份:"+result["year"]+"&nbsp;&nbsp;&nbsp;"+"季节:"+result["season"]+"<br/>"+"平牌:"+result["brand"]+"&nbsp;&nbsp;&nbsp;"+"产品线:"+result["productLine"]);
                //  console.log("id"+result["id"]);
                $("#img").attr('src',"<%=request.getContextPath() %>"+picurl);
                $("#label2").html("成功");



            },
            error:function(error){
                //alert("后台问题请求失败")
                console.log('请求失败');
                $("#label2").html("请求失败");
                //myChart.hideLoading();
                //myChart.setOption();
            }
        });
    }
</script>
<!--异步加载图片  -->
<!-- <script type="application/javascript">
 function showpicture(picurl){
	 var url=picurl;
	 $.ajax({
type:"get",
url:""
})
}
</script> -->
<script type="text/javascript">
    function upload(){
        var file = document.myForm.file.files[0];
       // var file =$("#file").get(0).files[0]
        var fm = new FormData();
        // fm.append('userName', userName);
        fm.append('uploadFile', file);
        var path=config.baseurl+"charts/parseexcel"
        $.ajax(
            {
                url: path,
                type: 'POST',
                data: fm,
                contentType: false, //禁止设置请求类型
                processData: false, //禁止jquery对DAta数据的处理,默认会处理
                //禁止的原因是,FormData已经帮我们做了处理
                success: function (result) {
                    //测试是否成功
                    //但需要你后端有返回值
                    showExcelData(result);
                    $("#label").html("解析 yes");
                    // alert(result);

                },
                error:function(result){
                    $("#label").html("上传失败");
                }
            }
        );
    }

</script>
<script type="application/javascript">
    $(document).ready(function(){
        $("#btn").click(function(){
            show();
        })
        $("#btn1").click(function(){
            upload();
        })
    })
</script>
<script src="config/config.js"></script>

<script src="function/echarts0_fuction.js"></script>
















</body>

</html>
