<!DOCTYPE html>
<html>
	<head>
		<meta charset="UTF-8">
		<!--width 属性控制设备的宽度。假设您的网站将被带有不同屏幕分辨率的设备浏览，那么将它设置为 device-width 可以确保它能正确呈现在不同设备上。initial-scale=1.0 确保网页加载时，以 1:1 的比例呈现，不会有任何的缩放。-->
	<meta name="viewport" content="width=device-width, initial-scale=1">
	 <!--优先以webkit内核渲染页面-->
	 <meta name="renderer"content="webkit">
	 <!--元素可提供有关页面的元信息（meta-information），比如针对搜索引擎和更新频度的描述和关键词-->
<!--	  <meta name="keywords" content="keywords用来告诉搜索引擎你网页的关键字是什么">-->
<!--	<meta name="description" content="这里是网页的描述，是给搜索引擎看的，搜索引擎根据这个描述进行收录排名，一般是网页内的关键字">-->
		<title>文件导出</title>
<!-- 最新版本的 Bootstrap 核心 CSS 文件 -->
<link rel="stylesheet" href="https://cdn.bootcss.com/bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">
<!--<link href="https://cdn.bootcss.com/bootstrap/3.3.7/css/bootstrap.min.css" rel="stylesheet">-->
	 <!--<link href="css/bootstrap.min.css?v=3.4.0" rel="stylesheet">-->
  <link href="css/style.css?v=2.2.0" rel="stylesheet">
  <!--动画效果-->
 <link href="css/animate.css" rel="stylesheet">
   <link href="font-awesome/css/font-awesome.css?v=4.3.0" rel="stylesheet">
       <link href="css/plugins/datapicker/datepicker3.css" rel="stylesheet">
	</head>
	<body>
		<!--总容器-->
	<div id="wrapper">
        <!--侧边导航-->
        <nav class="navbar-default navbar-static-side" role="navigation">
            <!--折叠收缩-->
            <div class="sidebar-collapse">
                <!-- ul 无序列表-->
                <ul class="nav" id="side-menu">
                    <li class="nav-header">

                        <div class="dropdown profile-element"> <span>
                            <img alt="image" class="img-circle img-responsive" src="img/dog.jpg" />
                             </span>
                            <a data-toggle="dropdown" class="dropdown-toggle" href="">
                                <span class="clear"> <span class="block m-t-xs"> <strong class="font-bold">User</strong>
                             </span> <span class="text-muted text-xs block">管理员 <b class="caret"></b></span> </span>
                            </a>
                            <ul class="dropdown-menu animated fadeInRight m-t-xs">
                                <li><a href="">修改头像</a>
                                </li>
                                <li><a href="">个人资料</a>
                                </li>
                                <li><a href="">联系我们</a>
                                </li>
                                <li><a href="">信箱</a>
                                </li>
                                <li class="divider"></li>
                                <li><a href="">安全退出</a>
                                </li>
                            </ul>
                        </div>
                        <div class="logo-element">
                            H+
                        </div>

                    </li>
                    <li class="">
                        <a href=""><i class="fa fa-th-large"></i> <span class="nav-label">主页</span> <span class="fa arrow"></span></a>
                        <ul class="nav nav-second-level">
                        </ul>
                    </li>


                    <li class="">
                        <a href="index.html"><i class="fa fa-bar-chart-o"></i> <span class="nav-label">图表</span><span class="fa arrow"></span></a>
                        <ul class="nav nav-second-level">
                            <li><a href="echarts0.html">EChartsOne</a>
                            </li>
                            <li><a href="echarts.html">EChartsOne</a>
                            </li>
                            <li><a href="echarts5.html">EChartsTwo</a>
                            </li>
                            <li><a href="echarts7.html">EChartsTwo</a>
                            </li>

                        </ul>
                    </li>
                    <li class="">
                        <a href="#"><i class="fa fa-table"></i> <span class="nav-label">表格</span><span class="fa arrow"></span></a>
                        <ul class="nav nav-second-level">
                            <li><a href="datatables.html">datapicker</a>
                            </li>
                            <li><a href="bootstraptable.html">BootStrapTable</a>
                            </li>
                            <li><a href="table_jqgrid.html">jqGrid</a>
                            </li>
                        </ul>
                    </li>
                    <li class="active">
                        <a href="#"><i class="fa fa-table"></i> <span class="nav-label">文件IO</span><span class="fa arrow"></span></a>
                        <ul class="nav nav-second-level">
                            <li><a href="uploadfile.html">文件上传</a>
                            </li>
                            <li><a href="filedown.html">数据导出</a>
                            </li>

                        </ul>
                    </li>

                </ul>
            </div>
        </nav>
		
		
	<div id="page-wrapper" class="gray-bg dashbard-1">
        <div class="row border-bottom">
            <nav class="navbar navbar-static-top" role="navigation" style="margin-bottom: 0">
                <div class="navbar-header">
                    <a class="navbar-minimalize minimalize-styl-2 btn btn-primary " href="#"><i class="fa fa-bars"></i> </a>
                    <form role="search" class="navbar-form-custom" method="post" action="">
                        <div class="form-group">
                            <input type="text" placeholder="查找的内容 …" class="form-control" name="top-search" id="top-search">
                        </div>
                    </form>
                </div>
                <ul class="nav navbar-top-links navbar-right">
                    <li>
                        <span class="m-r-sm text-muted welcome-message"><a href="" title="返回首页"><i class="fa fa-home"></i></a></span>
                    </li>


                    <li>
                        <a href="login.html">
                            <i class="fa fa-sign-out"></i> 注册
                        </a>
                    </li>
                    <li>
                        <a href="login.html">
                            <i class="fa fa-sign-out"></i> 登陆
                        </a>
                    </li>
                    <li>
                        <a href="">
                            <i class="fa fa-sign-out"></i> 退出
                        </a>
                    </li>
                </ul>

            </nav>
        </div>
	            <div class="row wrapper border-bottom white-bg page-heading">
                <div class="col-lg-10">
                    <h2>百度ECharts图表</h2>
                    <ol class="breadcrumb">
                        <li>
                            <a href="index.html">主页</a>
                        </li>
                        <li>
                            <a>导出</a>
                        </li>
                        <li>
                            <strong>excel文件导出</strong>
                        </li>
                    </ol>
                </div>
                <div class="col-lg-2">

                </div>
            </div>
	                     <div class="row  border-bottom white-bg dashboard-header">
                <div class="col-sm-12">
                    <p>
                    </p>
                </div>

            </div>
	         <div class="wrapper wrapper-content animated fadeInRight">
	          <div class="row">
	          	<div class="col-lg-12">
	          		<div class="ibox float-e-margins">
	          			  <div class="ibox-title">
	          			  	<h5>数据导出</h5>
	          			  </div>
	          			  <div class="ibox-content">
	          			  	 <form id="checkid" class="form-horizontal" >
                                       <div class="form-group" >
                                        <label class="font-noraml">商品id：</label>
                                        <div class="col-sm-8">
                                            <input id="id" type="text" class="form-control" name="id" placeholder="为空时，不对id检索" >
                                        </div>
                                    </div>
                                                    
                                  <div class="form-group" id="data_1">
                                    <label class="font-noraml ">某一天</label>
                                    <div class="input-group date">
                                    	<!--不加如下这一条则日历会被展开，且没有选择效果-->
                                       <span class="input-group-addon"><i class="fa fa-calendar"></i></span>
                                        <input type="text" id="oneday" class="form-control" value="2017-3-22">
                                    </div>
                                </div>
                                   <div class="form-group" id="data_5">
                                    <label class="font-noraml">日期范围</label>
                                    <div class="input-daterange input-group" id="datepicker">
                                        <input type="text" class="input-sm form-control"  id="start" name="start" value="2017-1-1" />
                                        <span class="input-group-addon">到</span>
                                        <input type="text" class="input-sm form-control"  id="end" name="end" value="2017-1-10" />
                                    </div>
                                </div>
                       <!--         <button type="submit" class="btn btn-primary">form可以异步提交但下载不行</button>-->
                                    
                                </form>
                      <!--          <button type="button" id="downloadoneday" class="btn btn-primary">下载当天</button>-->
                                <button type="button" id="download" class="btn btn-primary">下载</button>
	          			  </div>
	          		</div>
	          	</div>
	          </div>
	         </div>
	         <div class="footer">
                <div class="pull-right">
                    By：<a href="http://" target="_blank">guoxaioqun-copy</a>
                </div>
                <div>
                    <strong>Copy</strong> &copy; 2017
                </div>
            </div>

	</div>
	</div>	
		
		
		<!--Bootstrap 中文网 联合 又拍云 共同为 Bootstrap 专门构建了免费的 CDN 加速服务，访问速度更快、加速效果更明显、没有速度和带宽限制、永久免费。BootCDN 还对大量的前端开源工具库提供了 CDN 加速服务-->
		<!-- jQuery文件。务必在bootstrap.min.js 之前引入 -->
<script src="https://cdn.bootcss.com/jquery/2.1.1/jquery.min.js"></script>
 <!--<script src="js/jquery-2.1.1.min.js"></script>-->
<!-- 最新的 Bootstrap 核心 JavaScript 文件 -->
<script src="https://cdn.bootcss.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script>
<!--<script src="https://cdn.bootcss.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>-->
  <!--<script src="js/bootstrap.min.js?v=3.4.0"></script>-->
<!--手风琴菜单metisMenu-->
<script src="js/plugins/metisMenu/jquery.metisMenu.js"></script>
<script src="js/plugins/slimscroll/jquery.slimscroll.min.js"></script>

<!--实现了下拉菜单的效果1.-->
<script src="js/hplus.js?v=2.2.0"></script>
    <!-- Data picker  日期-->
    <script src="js/plugins/datapicker/bootstrap-datepicker.js"></script>

    <!-- jQuery Validation plugin javascript-->
    <script src="js/plugins/validate/jquery.validate.min.js"></script>
    <!--中文消息-->
    <script src="js/plugins/validate/messages_zh.min.js"></script>
    
    <!--表单-->
    <script src="js/jquery.form.js"></script>

        <!--config-->
<script src="config/config.js"></script>

 <script type="application/javascript">
    	       //以下为修改jQuery Validation插件兼容Bootstrap的方法，没有直接写在插件中是为了便于插件升级
        $.validator.setDefaults({
            highlight: function (element) {
                $(element).closest('.form-group').removeClass('has-success').addClass('has-error');
            },
            success: function (element) {
                element.closest('.form-group').removeClass('has-error').addClass('has-success');
            },
            errorElement: "span",
            errorClass: "help-block m-b-none",
            validClass: "help-block m-b-none"


        });
        
        
        $().ready(function(){
        	
        	$("#checkid").validate({
       	            //异步提交,但不能异步下载。。。,但是可以提交后让后台先进行文件准备。。。
       /*       submitHandler: function(form) 
             {      
             	$(from).submit({
             		type:"POST",
                 	url:"http://127.0.0.1:8080/libraryone/shengecanmou/download",
                 	dataType:"json",
                 	data:{
                 		start:$("#start").val(),
                 		end:$("#end").val(),
                 		id:$("#id").val()} 
             	})*/
             	/*异步好啊。但不能下载*/
          /*       $(form).ajaxSubmit({
                 	type:"POST",
                 	url:"http://127.0.0.1:8080/libraryone/shengecanmou/download",
                 	dataType:"json",
                 	data:{
                 		start:$("#start").val(),
                 		end:$("#end").val(),
                 		id:$("#id").val()}   	
                 });*/
                 //暂未遇到如下情况
               //  return false; //此处必须返回false，阻止常规的form提交
          rules:{
           	id:{
           		
           			required: true,
                    	//远程异步验证
                                remote:{
                                	url:"http://127.0.0.1:8080/libraryone/shengecanmou/checkid",
                                	//crossDomain: true,
                                	type:"post",
                                	dataType:"json",
                                	data:{
                                		id:function(){
                                			return $("#id").val();
                                		}
                                	}
                                }
           	}
           }
             })
        })
    	
    </script>
<!--日期选择-->
<script type="application/javascript">
	$(document).ready(function(){
		      $('#data_1 .input-group.date').datepicker({
                todayBtn: "linked",
                keyboardNavigation: false,
                forceParse: false,
                calendarWeeks: true,
                autoclose: true
            });
		   $('#data_5 .input-daterange').datepicker({
                keyboardNavigation: false,
                forceParse: false,
                autoclose: true
            });
            $("#downloadoneday").click(function(){

            	var oneday=$("#oneday").val();
                var path=config.baseurl+"shengecanmou/download?start="+oneday+"&end="+oneday+"&id="+$("#id").val();
            	
            		//window.location.href="http://127.0.0.1:8080/libraryone/shengecanmou/download?start="+oneday+"&end="+oneday+"&id="+$("#id").val();
                 window.location.href=path;
            });
           $("#download").click(function(){
          //	var start= "start="+function(){return $("#start").val();};
          //	var end =function(){return $("#end").val();}
          //	var id=function(){return $("#id").val();}
          
         //var end= "end="+$("#end").val();
           //	var id=$("id").val();
          // console.log(start);
         //  	console.log(end);
         /*编码以后*/
          // 	window.location.href="http://127.0.0.1:8080/libraryone/shengecanmou/download?start="+encodeURIComponent($("#start").val())+"&end="+encodeURIComponent($("#end").val())+"&id="+encodeURIComponent($("#id").val());
           	/*不用编码*/

               var path=config.baseurl+"shengecanmou/download?start="+$("#start").val()+"&end="+$("#end").val()+"&id="+$("#id").val();
              window.location.href=path;
               //	window.location.href="http://127.0.0.1:8080/libraryone/shengecanmou/download?start="+$("#start").val()+"&end="+$("#end").val()+"&id="+$("#id").val();
           	//window.location.href="http://127.0.0.1:8080/libraryone/shengecanmou/download?"+encodeURIComponent("start="+start+"&end="+end+"&id="+id);
           //	window.location.href="http://127.0.0.1:8080/libraryone/shengecanmou/download?"+"start="+$("#start").val()+"&end="+$("#end").val()+"&id="+$("#id").val();
           //	window.location.href="http://127.0.0.1:8080/libraryone/shengecanmou/download?start="+$("#start").val()+"&end="+$("#end").val()+"&id="+$("#id").val();
				
				//window.location.href="http://127.0.0.1:8080/libraryone/shengecanmou/download?start=2017-9-16&end=2017-9-16&id=1";
		
		/*	$.get(
				"http://127.0.0.1:8080/libraryone/shengecanmou/download",
			    {
			    	start:$("#start").val(),
			    	end:$("#end").val(),
			        id:$("#id").val()
			        },
			    function(msg){
			    	Console.log(msg);
			    }
			)*/
           });
 
            
	})
	
</script>

	</body>
</html>
